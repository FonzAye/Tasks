# /etc/elasticsearch/elasticsearch.yml - managed by Ansible

cluster.name: es-nodes
node.roles: [ master, data, ingest ]
node.name: {{ inventory_hostname }}
path.data: /var/lib/elasticsearch
path.logs: /var/log/elasticsearch
bootstrap.memory_lock: true
network.host: 0.0.0.0

discovery.seed_hosts: [{% for host in groups['elasticsearch'] %}
{% if hostvars[host]['private_ip'] is defined %}
"{{ hostvars[host]['private_ip'] }}"{% if not loop.last %},{% endif %}
{% else %}
{% set _ = errors.append(host) %}
{% endif %}
{% endfor %}]

cluster.initial_master_nodes: [{% for host in groups['elasticsearch'] %}
"{{ host }}"{% if not loop.last %},{% endif %}
{% endfor %}]

xpack.security.enabled: false
xpack.security.enrollment.enabled: false
xpack.security.http.ssl:
    enabled: false
    keystore.path: certs/http.p12
xpack.security.transport.ssl:
    enabled: false
    verification_mode: certificate
    keystore.path: certs/transport.p12
    truststore.path: certs/transport.p12

http.host: 0.0.0.0
transport.host: 0.0.0.0